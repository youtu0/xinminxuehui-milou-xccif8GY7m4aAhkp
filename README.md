
éšç€æ•°æ®é›†çš„ä½¿ç”¨é‡æ€¥å‰§å¢žåŠ ï¼ŒHugging Face ç¤¾åŒºå·²ç»å˜æˆäº†ä¼—å¤šæ•°æ®é›†é»˜è®¤å­˜æ”¾çš„ä»“åº“ã€‚æ¯æœˆï¼Œæµ·é‡æ•°æ®é›†è¢«ä¸Šä¼ åˆ°ç¤¾åŒºï¼Œè¿™äº›æ•°æ®é›†äºŸéœ€æœ‰æ•ˆçš„æŸ¥è¯¢ã€è¿‡æ»¤å’Œå‘çŽ°ã€‚


![Dataset Monthly Creations](https://img-s2.andfun.cn/devrel/posts/2024/10/1762b13434759.png)


*æ¯ä¸ªæœˆåœ¨ Hugging Face Hub åˆ›å»ºçš„æ•°æ®é›†*


æˆ‘ä»¬çŽ°åœ¨éžå¸¸æ¿€åŠ¨åœ°å®£å¸ƒï¼Œæ‚¨å¯ä»¥ç›´æŽ¥åœ¨ Hugging Face ç¤¾åŒºä¸­å¯¹æ‚¨çš„æ•°æ®é›†è¿›è¡Œ SQL æŸ¥è¯¢ï¼


## æ•°æ®é›†çš„ SQL æŽ§åˆ¶å°ä»‹ç»


åœ¨æ¯ä¸ªå…¬å…±æ•°æ®é›†ä¸­ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„ SQL æŽ§åˆ¶å°æ ‡ç­¾ã€‚åªéœ€å•å‡»å³å¯æ‰“å¼€ SQL æŽ§åˆ¶å°ä»¥æŸ¥è¯¢è¯¥æ•°æ®é›†ã€‚


![æŸ¥è¯¢ Magpie-Ultra æ•°æ®é›†æ¥èŽ·å–ä¼˜ç§€çš„é«˜è´¨é‡æŽ¨ç†æŒ‡ä»¤ã€‚](https://img-s2.andfun.cn/devrel/posts/2024/10/f792f7c8ed391.gif)


æŸ¥è¯¢ Magpie\-Ultra æ•°æ®é›†æ¥èŽ·å–ä¼˜ç§€çš„é«˜è´¨é‡æŽ¨ç†æŒ‡ä»¤ã€‚


æ‰€æœ‰çš„æ“ä½œéƒ½åœ¨æµè§ˆå™¨ä¸­å®Œæˆï¼ŒæŽ§åˆ¶å°è¿˜é…å¤‡äº†ä¸€äº›å®žç”¨çš„åŠŸèƒ½:


* **å®Œå…¨çš„æœ¬åœ°åŒ–æ”¯æŒ**: SQL æŽ§åˆ¶å°ç”± [DuckDB](https://github.com) WASM é©±åŠ¨ï¼Œå› æ­¤æ‚¨å¯ä»¥æ— éœ€ä»»ä½•ä¾èµ–å³å¯æŸ¥è¯¢æ‚¨çš„æ•°æ®é›†ã€‚
* **å®Œæ•´çš„ DuckDB è¯­æ³•æ”¯æŒ**: DuckDB æ”¯æŒå…¨é¢çš„ SQL è¯­å¥ï¼Œå¹¶åŒ…å«è®¸å¤šå†…ç½®å‡½æ•°ï¼Œå¦‚æ­£åˆ™è¡¨è¾¾å¼ã€åˆ—è¡¨ã€JSONã€åµŒå…¥ç­‰ã€‚æ‚¨ä¼šå‘çŽ° DuckDB çš„è¯­æ³•ä¸Ž PostgreSQL éžå¸¸ç›¸ä¼¼ã€‚
* **ç»“æžœå¯¼å‡º**: æ‚¨å¯ä»¥å°†æŸ¥è¯¢çš„ç»“æžœå¯¼å‡ºä¸º parquet æ ¼å¼ .
* **åˆ†äº«**: æ‚¨å¯ä»¥ä½¿ç”¨é“¾æŽ¥åˆ†äº«å…¬å…±æ•°æ®é›†çš„æŸ¥è¯¢ç»“æžœ .


## å·¥ä½œåŽŸç†


### Parquet æ ¼å¼è½¬æ¢


å¤§å¤šæ•°åœ¨ Hugging Face ä¸Šçš„æ•°æ®é›†éƒ½å­˜å‚¨ä¸º Parquet æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ç§ä¼˜åŒ–äº†æ€§èƒ½å’Œå­˜å‚¨æ•ˆçŽ‡çš„åˆ—å¼æ•°æ®æ ¼å¼ã€‚Hugging Face çš„ æ•°æ®é›†è§†å›¾ å’Œ SQL æŽ§åˆ¶å°ä¼šç›´æŽ¥ä»Žæ•°æ®é›†çš„ Parquet æ–‡ä»¶ä¸­åŠ è½½æ•°æ®ã€‚å¦‚æžœæ•°æ®é›†æ˜¯ä»¥å…¶ä»–æ ¼å¼å­˜å‚¨çš„ï¼Œåˆ™å‰ 5GB è‡ªåŠ¨è½¬æ¢ä¸º Parquet æ ¼å¼ã€‚æ‚¨å¯ä»¥åœ¨ [Dataset Viewer Parquet API æ–‡æ¡£](https://github.com) ä¸­æ‰¾åˆ°æ›´å¤šå…³äºŽ Parquet è½¬æ¢è¿‡ç¨‹çš„ä¿¡æ¯ã€‚


ä½¿ç”¨è¿™äº› Parquet æ–‡ä»¶ï¼ŒSQL æŽ§åˆ¶å°ä¼šä¸ºæ‚¨åˆ›å»ºè§†å›¾ï¼ŒåŸºäºŽæ•°æ®é›†çš„åˆ’åˆ†å’Œé…ç½®ä¾›æ‚¨è¿›è¡ŒæŸ¥è¯¢ã€‚


### DuckDB WASM ðŸ¦†å¼•æ“Ž


[DuckDB WASM](https://github.com) æ˜¯é©±åŠ¨ SQL æŽ§åˆ¶å°çš„å¼•æ“Žã€‚å®ƒæ˜¯ä¸€ä¸ªåœ¨æµè§ˆå™¨ä¸­è¿è¡ŒäºŽ Web Assembly çš„è¿›ç¨‹å†…æ•°æ®åº“å¼•æ“Žï¼Œæ— éœ€æœåŠ¡å™¨æˆ–åŽç«¯ã€‚


ä»…åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå®ƒä¸ºç”¨æˆ·æä¾›æœ€å¤§ç¨‹åº¦çš„çµæ´»æ€§ï¼Œå¯ä»¥è‡ªç”±æŸ¥è¯¢æ•°æ®è€Œä¸éœ€è¦ä»»ä½•ä¾èµ–é¡¹ã€‚è¿™ä¹Ÿä½¿å¾—é€šè¿‡ç®€å•çš„é“¾æŽ¥åˆ†äº«å¯å¤çŽ°çš„ç»“æžœå˜å¾—éžå¸¸ç®€å•ã€‚


ä½ å¯èƒ½åœ¨æƒ³ï¼Œâ€œè¿™æ˜¯å¦é€‚ç”¨äºŽå¤§æ•°æ®é›†ï¼Ÿâ€ç­”æ¡ˆæ˜¯â€œå½“ç„¶å¯ä»¥ï¼


ä»¥ä¸‹æ˜¯å¯¹ [OpenCo7/UpVoteWeb](https://github.com) æ•°æ®é›†çš„æŸ¥è¯¢ï¼Œè¯¥æ•°æ®é›†ç»è¿‡ Parquet æ ¼å¼è½¬æ¢åŽæœ‰ `12.6M` è¡Œã€‚


![Reddit Movie Suggestions](https://img-s2.andfun.cn/devrel/posts/2024/10/2d417be07aec5.png)


æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨ä¸åˆ° 3 ç§’å†…çš„æ—¶é—´å†…æ”¶åˆ°äº†ç®€å•è¿‡æ»¤æŸ¥è¯¢çš„ç»“æžœã€‚


è™½ç„¶åŸºäºŽæ•°æ®é›†çš„å¤§å°å’ŒæŸ¥è¯¢çš„å¤æ‚åº¦æŸ¥è¯¢å¯èƒ½ä¼šå‘ç”Ÿå¾ˆé•¿æ—¶é—´ï¼Œæ‚¨ä¼šæ„Ÿåˆ°åƒæƒŠæ‚¨ç”¨ SQL æŽ§åˆ¶å°åšåˆ°çš„äº‹æƒ…ã€‚


å°±åƒä»»ä½•æŠ€æœ¯ä¸€æ ·ï¼Œä¹Ÿæœ‰å…¶å±€é™æ€§:


* SQL æŽ§åˆ¶å°å¯ä»¥å¤„ç†è®¸å¤šæŸ¥è¯¢ã€‚ç„¶è€Œå†…å­˜é™åˆ¶çº¦ä¸º 3GBï¼Œå› æ­¤æœ‰å¯èƒ½è¶…å‡ºå†…å­˜å¹¶æ— æ³•å¤„ç†æŸ¥è¯¢ (æç¤º: å°è¯•ä½¿ç”¨è¿‡æ»¤å™¨æ¥å‡å°‘æ‚¨æ­£åœ¨æŸ¥è¯¢çš„æ•°æ®é‡ï¼Œå¹¶ç»“åˆä½¿ç”¨ `LIMIT` )ã€‚
* å°½ç®¡ DuckDB WASM éžå¸¸å¼ºå¤§ï¼Œä½†å®ƒå¹¶ä¸å®Œå…¨ä¸Ž DuckDB åŠŸèƒ½ä¸€è‡´ã€‚ä¾‹å¦‚ï¼ŒDuckDB WASM å°šæœªæ”¯æŒ [`hf://` åè®®ä»¥æŸ¥è¯¢æ•°æ®é›†](https://github.com)ã€‚


### ç¤ºä¾‹: å°†æ•°æ®é›†ä»Ž Alpaca è½¬æ¢ä¸ºå¯¹è¯æ ¼å¼


çŽ°åœ¨æˆ‘ä»¬å·²ç»ä»‹ç»äº† SQL æŽ§åˆ¶å°ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®žé™…ä¾‹å­æ¥å®žè·µä¸€ä¸‹ã€‚å½“å¾®è°ƒå¤§åž‹è¯­è¨€æ¨¡åž‹æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚å…¶ä¸­ç‰¹åˆ«æµè¡Œçš„ä¸€ç§æ ¼å¼æ˜¯å¯¹è¯å¼æ ¼å¼ï¼Œåœ¨è¿™ç§æ ¼å¼ä¸­ï¼Œæ¯ä¸€è¡Œä»£è¡¨ç”¨æˆ·ä¸Žæ¨¡åž‹ä¹‹é—´çš„å¤šè½®å¯¹è¯ã€‚SQL æŽ§åˆ¶å°å¯ä»¥å¸®åŠ©æˆ‘ä»¬é«˜æ•ˆåœ°å°†æ•°æ®è½¬æ¢ä¸ºè¿™ç§æ ¼å¼ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ SQL å°† Alpaca æ•°æ®é›†è½¬æ¢ä¸ºå¯¹è¯å¼æ ¼å¼ã€‚


é€šå¸¸å¼€å‘äººå‘˜ä¼šé€šè¿‡ Python é¢„å¤„ç†æ­¥éª¤æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼Œä½†æˆ‘ä»¬å¯ä»¥å±•ç¤ºä¸€ä¸‹åœ¨ä¸åˆ° 30 ç§’çš„æ—¶é—´å†…åˆ©ç”¨ SQL æŽ§åˆ¶å°å®žçŽ°ç›¸åŒçš„åŠŸèƒ½ã€‚


![](https://img-s2.andfun.cn/devrel/posts/2024/10/57dcc7e6e7fb6.png)


åœ¨ä¸Šæ–¹çš„æ•°æ®é›†ä¸­ï¼Œç‚¹å‡» **SQL æŽ§åˆ¶å°** æ ‡ç­¾ä»¥æ‰“å¼€ SQL æŽ§åˆ¶å°ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸‹æ–¹çš„æŸ¥è¯¢å·²è‡ªåŠ¨å¡«å……ã€‚


### SQL



```


|  | -- Convert Alpaca format to Conversation format |
| --- | --- |
|  | WITH |
|  | source_view AS ( |
|  | SELECT * FROM train -- Change 'train' to your desired view name here |
|  | ) |
|  | SELECT |
|  | [ |
|  | struct_pack( |
|  | "from" := 'user', |
|  | "value" := CASE |
|  | WHEN input IS NOT NULL AND input != '' |
|  | THEN instruction || '\n\n' || input |
|  | ELSE instruction |
|  | END |
|  | ), |
|  | struct_pack( |
|  | "from" := 'assistant', |
|  | "value" := output |
|  | ) |
|  | ] AS conversation |
|  | FROM source_view |
|  | WHERE instruction IS NOT NULL |
|  | AND output IS NOT NULL; |


```

æˆ‘ä»¬åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ `struct_pack` å‡½æ•°ä¸ºæ¯ä¸ªå¯¹è¯åˆ›å»ºä¸€ä¸ªæ–°çš„ STRUCT è¡Œ


DuckDB å¯¹ç»“æž„åŒ–çš„æ•°æ®ç±»åž‹å’Œå‡½æ•°æœ‰å¾ˆå¥½çš„æ–‡æ¡£è¯´æ˜Žï¼Œä½ å¯ä»¥å‚è€ƒ [æ•°æ®ç±»åž‹](https://github.com) å’Œ [å‡½æ•°](https://github.com)ã€‚ä½ ä¼šå‘çŽ°è®¸å¤šæ•°æ®é›†åŒ…å«å¸¦æœ‰ JSON æ•°æ®çš„åˆ—ã€‚DuckDB æä¾›äº†æ˜“äºŽè§£æžå’ŒæŸ¥è¯¢è¿™äº›åˆ—çš„åŠŸèƒ½ã€‚


![Alpaca to Conversation](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/sql_console/alpaca-to-conversation.png)


ä¸€æ—¦æˆ‘ä»¬å¾—åˆ°ç»“æžœï¼Œå°±å¯ä»¥å°†å…¶ä¸‹è½½ä¸ºä¸€ä¸ª Parquet æ–‡ä»¶ã€‚ä½ å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°æœ€ç»ˆè¾“å‡ºçš„æ ·å­ã€‚


![](https://img-s2.andfun.cn/devrel/posts/2024/10/e3ade6d4d3a3f.png)


**è¯•ä¸€ä¸‹ï¼**


ä½œä¸ºå¦ä¸€ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•å¯¹ [SkunkworksAI/reasoning\-0\.01](https://github.com) è¿è¡Œä¸€ä¸ª SQL æŽ§åˆ¶å°æŸ¥è¯¢ï¼Œä»¥æŸ¥çœ‹åŒ…å«è¶…è¿‡ 10 ä¸ªæŽ¨ç†æ­¥éª¤çš„æŒ‡ä»¤ã€‚


## SQL ç‰‡æ®µ


DuckDB æœ‰è®¸å¤šæˆ‘ä»¬ä»åœ¨æŽ¢ç´¢çš„åº”ç”¨åœºæ™¯ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª [SQL ç‰‡æ®µ](https://github.com) ç©ºé—´ï¼Œä»¥å±•ç¤ºæ‚¨å¯ä»¥åœ¨ SQL æŽ§åˆ¶å°ä¸­å®Œæˆçš„æ“ä½œã€‚


è¿™é‡Œæœ‰ä¸€äº›éžå¸¸æœ‰è¶£çš„ç”¨ä¾‹:


* [ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤è°ƒç”¨ç‰¹å®šå‡½æ•°çš„æ•°æ®é›†](https://github.com)
* [ä»Žå¼€æ”¾ LLM æŽ’è¡Œæ¦œä¸­æ‰¾åˆ°æœ€å—æ¬¢è¿Žçš„åŸºç¡€æ¨¡åž‹](https://github.com)
* [å°† alpaca æ•°æ®é›†è½¬æ¢ä¸ºå¯¹è¯æ ¼å¼](https://github.com):[æ¥šé—¨åŠ é€Ÿå™¨](https://shexiangshi.org)
* [ä½¿ç”¨åµŒå…¥è¿›è¡Œç›¸ä¼¼æ€§æœç´¢](https://github.com)
* [ä»Žæ•°æ®é›†ä¸­è¿‡æ»¤è¶…è¿‡ 5 ä¸‡è¡Œä»¥èŽ·å–æœ€é«˜è´¨é‡çš„æŽ¨ç†æŒ‡ä»¤](https://github.com)


è¯·è®°ä½ï¼Œåªéœ€ç‚¹å‡»ä¸€ä¸‹å³å¯ä¸‹è½½æ‚¨çš„ SQL ç»“æžœä½œä¸º Parquet æ–‡ä»¶å¹¶ç”¨äºŽæ•°æ®é›†ï¼


æˆ‘ä»¬éžå¸¸å¸Œæœ›å¬å¬æ‚¨å¯¹ SQL æŽ§åˆ¶å°çš„çœ‹æ³•ï¼Œå¦‚æžœæ‚¨æœ‰ä»»ä½•åé¦ˆï¼Œè¯·åœ¨ä»¥ä¸‹ [å¸–å­ä¸­ç•™è¨€ï¼](https://github.com)


## èµ„æº


* [DuckDB WASM](https://github.com)
* [DuckDB è¯­æ³•](https://github.com)
* [DuckDB WASM è®ºæ–‡](https://github.com)
* [Parquet æ ¼å¼ç®€ä»‹](https://github.com)
* [Hugging Face \+ DuckDB](https://github.com)
* [SQL æ‘˜è¦ç©ºé—´](https://github.com)




---



> è‹±æ–‡åŽŸæ–‡: [https://hf.co/blog/sql\-console](https://github.com)
> 
> 
> åŽŸæ–‡ä½œè€…: Caleb Fahlgren
> 
> 
> è¯‘è€…: smartisan


